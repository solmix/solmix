<?xml version="1.0" encoding="UTF-8"?>
	<!--

		* ========THE SOLMIX PROJECT===================================== * *
		This is free software; you can redistribute it and/or modify it 
		under the terms of the GNU Lesser General Public License as 
		published by the Free Software Foundation; either version 2.1 of the
		License, or (at your option) any later version.  This software is
		distributed in the hope that it will be useful,  but WITHOUT ANY
		WARRANTY; without even the implied warranty of  MERCHANTABILITY or
		FITNESS FOR A PARTICULAR PURPOSE. See the GNU  Lesser General Public
		License for more details.  you may not use this file except in
		compliance with the License.  You may obtain a copy of the License at
	    http://www.gnu.org/licenses/  or see the FSF site:
		http://www.fsf.org.
	-->
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
 xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0"
           xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0"
           xmlns:slx="http://www.solmix.com/xmlns/config/v1.0.0">

	
    <type-converters>
        <bean class="org.solmix.commons.osgi.cm.PropertiesConverter"/>
    </type-converters>

    <!-- Allow usage of System properties, especially the karaf.base property -->
    <ext:property-placeholder placeholder-prefix="$[" placeholder-suffix="]"/>

    <!-- AdminConfig property place holder for the org.apache.karaf.jaas  -->
    <cm:property-placeholder persistent-id="org.solmix.service.cm.ds" >
        <cm:default-properties>
            <!-- mode defined -->
            <cm:property name="mode.dev" value="true"/>
            <!-- version control -->
             <cm:property name="slxVersionNumber" value="SLX_WEB_CORE_SNAPHOST-2011-03-06"/>
			 <cm:property name="slxVersion" value="SLX_WEB_CORE_SNAPHOST-2011-03-06/EVAL Deployment"/>
			 <cm:property name="slxPackageDate" value="2011-03-06"/>
			 <cm:property name="clientVersionNumber" value="SC_SNAPSHOT-2011-08-02"/>
			 <!-- default pool configuration -->
            <cm:property name="pooling.default.maxActive" value="-1"/>
            <cm:property name="pooling.default.maxIdle" value="-1"/>
            <cm:property name="pooling.default.maxWait" value="-1"/>
            <cm:property name="pooling.default.whenExhaustedAction" value="grow"/>
            <cm:property name="pooling.default.testOnBorrow" value="true"/>
            <cm:property name="pooling.default.testWhileIdle" value="true"/>
            <cm:property name="pooling.default.timeBetweenEvictionRunsMillis" value="-1"/>
            <cm:property name="pooling.default.minEvictableIdleTimeMillis" value="-1"/>
            <cm:property name="pooling.default.numTestsPerEvictionRun" value="-1"/>
            <cm:property name="pooling.default.enabled" value="true"/>
            <!--========= DataSource configuration =========-->
            <cm:property name="DataSource.autoJoinTransactions" value="false"/>
            <cm:property name="DataSource.requiresRoles" value="false"/>
            <cm:property name="DataSource.requiresAuthentication" value="false"/>
            <!--=========PCManager configuration  ===========-->
            <cm:property name="RPCManager.maxRequestDebugLength" value="20480"/>
            <cm:property name="RPCManager.defaultCharset" value="UTF-8"/>
            <cm:property name="RPCManager.prettyPrintResponse" value="false"/>
            <cm:property name="RPCManager.omitNullMapValuesInResponse" value="false"/>
            <cm:property name="RPCManager.showClientOutput" value="true"/>
            <!--=========DSRequest configuration  ===========-->
            <cm:property name="DSRequest.maxUploadFileSize" value="104857600"/>
            <cm:property name="DSResponse.dropExtraFields" value="false"/>
            
            <cm:property name="authorization.enabled" value="true"/>
            <cm:property name="authentication.defaultRequired" value="true"/>
            <!--=========RequestContext configuration  ===========-->
            <cm:property name="RequestContext.reportParams" value="false"/>
            <!-- ========= compression configuration =====================-->
            <cm:property name="compression.alwaysCompressMimeTypes" value=""/>
            <cm:property name="compression.compressableMimeTypes" value="text/html, text/plain, text/css, text/xml, application/xml, application/x-javascript, text/javascript, text/ecmascript, image/svg+xml"/>
            <cm:property name="compression.compressThreshold" value="250"/>
            <!-- ==========Servlet configuration ======================= -->
            <cm:property name="servlet.compress" value="true"/>
             <!-- ==========Application configuration ======================= -->
            <!-- <cm:property name="application.default.needAuth" value="true"/> -->
            <cm:property name="application.default.userType" value="1"/>
            <cm:property name="application.default.definedOperationsOnly" value="true"/>
            <cm:property name="application.default.definedOperations" value="*"/>
             <cm:property name="application.default.adminUser" value="root"/>
            <!--  <cm:property name="" value=""/> -->
            <!--<cm:property name="DataSource.enumTranslateStrategy" value="string"/>-->
        </cm:default-properties>
    </cm:property-placeholder>
    <slx:config-bundle name="solmix-ds" >
        <slx:module name="ds" flags="required" reference-persistent-id="org.solmix.service.cm.ds">
        <slx:cm class="org.solmix.fmk.datasource.DSConfigModule" >
        mode.dev=${mode.dev}
        slxVersionNumber=${slxVersionNumber}
        slxVersion=${slxVersion}
        slxPackageDate=${slxPackageDate}
        clientVersionNumber=${clientVersionNumber}
        pooling.default.maxActive=${pooling.default.maxActive}
        pooling.default.maxIdle=${pooling.default.maxIdle}
		pooling.default.maxWait=${pooling.default.maxWait}
		pooling.default.whenExhaustedAction=${pooling.default.whenExhaustedAction}
		pooling.default.testOnBorrow=${pooling.default.testOnBorrow}
		pooling.default.testWhileIdle=${pooling.default.testWhileIdle}
		pooling.default.timeBetweenEvictionRunsMillis=${pooling.default.timeBetweenEvictionRunsMillis}
		pooling.default.minEvictableIdleTimeMillis=${pooling.default.minEvictableIdleTimeMillis}
		pooling.default.numTestsPerEvictionRun=${pooling.default.numTestsPerEvictionRun}
		pooling.default.enabled=${pooling.default.enabled}
		DataSource.autoJoinTransactions=${DataSource.autoJoinTransactions}
		DataSource.requiresRoles=${DataSource.requiresRoles}
		DataSource.requiresAuthentication=${DataSource.requiresAuthentication}
		autoJoinTransactions=${autoJoinTransactions}
		authorization.enabled=${authorization.enabled}
		authentication.defaultRequired=${authentication.defaultRequired}
		velocity.template.default.dir=$[karaf.base]/template
		RPCManager.maxRequestDebugLength=${RPCManager.maxRequestDebugLength}
		RPCManager.defaultCharset=${RPCManager.defaultCharset}
		RPCManager.prettyPrintResponse=${RPCManager.prettyPrintResponse}
		RPCManager.omitNullMapValuesInResponse=${RPCManager.omitNullMapValuesInResponse}
		RPCManager.showClientOutput=${RPCManager.showClientOutput}
		DSResponse.dropExtraFields=${DSResponse.dropExtraFields}
		DSRequest.maxUploadFileSize=${DSRequest.maxUploadFileSize}
		RequestContext.reportParams=${RequestContext.reportParams}
		servlet.compress=${servlet.compress}
		compression.alwaysCompressMimeTypes=${compression.alwaysCompressMimeTypes}
		compression.compressableMimeTypes=${compression.compressableMimeTypes}
		compression.compressThreshold=${compression.compressThreshold}
		application.default.userType=${application.default.userType}
		application.default.definedOperationsOnly=${application.default.definedOperationsOnly}
		application.default.definedOperations=${application.default.definedOperations}
		application.default.adminUser=${application.default.adminUser}
            </slx:cm>
        </slx:module>
    </slx:config-bundle>
</blueprint>
